# Image Hosting Server

Сервис для хранения и управления изображениями с веб-интерфейсом. Проект реализован на Python с использованием HTTP-сервера и JavaScript для клиентской части.

## Особенности

- Загрузка изображений с валидацией формата и размера
- Отображение галереи загруженных изображений с пагинацией
- Возможность удаления изображений
- Получение прямых ссылок на изображения
- Поддержка форматов JPG, PNG, GIF

## Технологии

### Backend
- Python 3.12
- HTTP-сервер с собственной реализацией маршрутизации
- PostgreSQL (через psycopg)
- Loguru для логирования

### Frontend
- Чистый JavaScript
- Bootstrap для стилизации
- Адаптивный дизайн

## Структура проекта

### Основные файлы Python:

- **app.py** - основной файл приложения, инициализирует сервер
- **AdvancedHandler.py** - базовый класс для обработки HTTP-запросов
- **ImageHostingHandler.py** - обработчик запросов для работы с изображениями
- **DBManager.py** - класс для работы с базой данных PostgreSQL
- **Router.py** - реализация маршрутизации запросов
- **utils.py** - вспомогательные утилиты (паттерн Singleton)
- **settings.py** - настройки приложения

### Файлы интерфейса:

- **index.html** - главная страница
- **upload.html** - страница загрузки изображений
- **images.html** - галерея изображений
- **script.js** - скрипты для работы с изображениями

## Архитектура

Проект построен на принципах ООП с использованием собственной реализации маршрутизации. Основные компоненты:

1. **HTTP-сервер** - обрабатывает входящие запросы
2. **Маршрутизатор** - направляет запросы к соответствующим обработчикам
3. **Обработчики** - содержат бизнес-логику
4. **Менеджер БД** - абстракция для работы с базой данных
5. **Веб-интерфейс** - клиентская часть для взаимодействия с сервером

## API

### GET `/api/images/`
Получение списка изображений с пагинацией.

**Параметры:**
- `page` - номер страницы (по умолчанию 1)

**Ответ:**
```json
{
  "images": [
    {
      "filename": "уникальный_идентификатор",
      "original_name": "исходное_имя_файла",
      "size": размер_в_кб,
      "upload_date": "дата_загрузки",
      "file_type": "расширение_файла"
    },
    ...
  ]
}
```

### POST `/upload/`
Загрузка изображения.

**Заголовки:**
- `Filename` - имя загружаемого файла
- `Content-Length` - размер файла

**Ограничения:**
- Максимальный размер файла: 5 МБ
- Допустимые форматы: JPG, JPEG, PNG, GIF

### DELETE `/api/delete/<image_id>`
Удаление изображения.

**Параметры пути:**
- `image_id` - идентификатор изображения

## Запуск проекта

### Через Docker:

```bash
# Сборка образа
docker build -t image-hosting-server .

# Запуск контейнера
docker run -p 8000:8000 -d image-hosting-server
```

### Локальный запуск:

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` с настройками базы данных:
```
POSTGRES_DB=image_hosting
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
```

3. Запустите приложение:
```bash
python app.py
```

4. Откройте в браузере `http://localhost:8000`

## Особенности реализации

- Использование UUID для генерации уникальных имен файлов
- Паттерн Singleton для менеджера БД и маршрутизатора
- Контроль допустимых форматов и размеров файлов
- Реализация собственной системы маршрутизации с поддержкой параметров пути
